basePath: /api/v1/
definitions:
  clusterapi.ClusterDisplayInfo:
    properties:
      backupFileUsage:
        $ref: '#/definitions/controller.Usage'
      clusterId:
        type: string
      clusterName:
        type: string
      clusterType:
        type: string
      clusterVersion:
        type: string
      cpuUsage:
        $ref: '#/definitions/controller.Usage'
      createTime:
        type: string
      dbPassword:
        type: string
      deleteTime:
        type: string
      diskUsage:
        $ref: '#/definitions/controller.Usage'
      extranetConnectAddresses:
        items:
          type: string
        type: array
      inProcessFlowId:
        type: integer
      intranetConnectAddresses:
        items:
          type: string
        type: array
      memoryUsage:
        $ref: '#/definitions/controller.Usage'
      port:
        type: integer
      statusCode:
        type: string
      statusName:
        type: string
      storageUsage:
        $ref: '#/definitions/controller.Usage'
      tags:
        items:
          type: string
        type: array
      tls:
        type: boolean
      updateTime:
        type: string
      whitelist:
        items:
          type: string
        type: array
    type: object
  clusterapi.ClusterNodeDemand:
    properties:
      componentType:
        type: string
      distributionItems:
        items:
          $ref: '#/definitions/clusterapi.DistributionItem'
        type: array
      totalNodeCount:
        type: integer
    type: object
  clusterapi.ComponentInstance:
    properties:
      componentName:
        type: string
      componentType:
        type: string
      nodes:
        items:
          $ref: '#/definitions/clusterapi.ComponentNodeDisplayInfo'
        type: array
    type: object
  clusterapi.ComponentNodeDisplayInfo:
    properties:
      cpuUsage:
        $ref: '#/definitions/controller.Usage'
      hostId:
        type: string
      ioUtil:
        type: number
      iops:
        items:
          type: number
        type: array
      memoryUsage:
        $ref: '#/definitions/controller.Usage'
      nodeId:
        type: string
      port:
        type: integer
      role:
        $ref: '#/definitions/clusterapi.ComponentNodeRole'
      spec:
        $ref: '#/definitions/hostapi.SpecBaseInfo'
      status:
        type: string
      storageUsage:
        $ref: '#/definitions/controller.Usage'
      version:
        type: string
      zone:
        $ref: '#/definitions/hostapi.ZoneBaseInfo'
    type: object
  clusterapi.ComponentNodeRole:
    properties:
      roleCode:
        type: string
      roleName:
        type: string
    type: object
  clusterapi.CreateClusterRsp:
    properties:
      clusterId:
        type: string
      clusterName:
        type: string
      clusterType:
        type: string
      clusterVersion:
        type: string
      createTime:
        type: string
      dbPassword:
        type: string
      deleteTime:
        type: string
      inProcessFlowId:
        type: integer
      statusCode:
        type: string
      statusName:
        type: string
      tags:
        items:
          type: string
        type: array
      tls:
        type: boolean
      updateTime:
        type: string
    type: object
  clusterapi.CreateReq:
    properties:
      clusterName:
        type: string
      clusterType:
        type: string
      clusterVersion:
        type: string
      dbPassword:
        type: string
      nodeDemandList:
        items:
          $ref: '#/definitions/clusterapi.ClusterNodeDemand'
        type: array
      tags:
        items:
          type: string
        type: array
      tls:
        type: boolean
    type: object
  clusterapi.DeleteClusterRsp:
    properties:
      clusterId:
        type: string
      createTime:
        type: string
      deleteTime:
        type: string
      inProcessFlowId:
        type: integer
      statusCode:
        type: string
      statusName:
        type: string
      updateTime:
        type: string
    type: object
  clusterapi.DescribeDashboardRsp:
    properties:
      clusterId:
        type: string
      shareCode:
        type: string
      token:
        type: string
      url:
        type: string
    type: object
  clusterapi.DetailClusterRsp:
    properties:
      backupFileUsage:
        $ref: '#/definitions/controller.Usage'
      clusterId:
        type: string
      clusterName:
        type: string
      clusterType:
        type: string
      clusterVersion:
        type: string
      components:
        items:
          $ref: '#/definitions/clusterapi.ComponentInstance'
        type: array
      cpuUsage:
        $ref: '#/definitions/controller.Usage'
      createTime:
        type: string
      dbPassword:
        type: string
      deleteTime:
        type: string
      diskUsage:
        $ref: '#/definitions/controller.Usage'
      extranetConnectAddresses:
        items:
          type: string
        type: array
      inProcessFlowId:
        type: integer
      intranetConnectAddresses:
        items:
          type: string
        type: array
      maintainTaskCron:
        type: string
      memoryUsage:
        $ref: '#/definitions/controller.Usage'
      port:
        type: integer
      statusCode:
        type: string
      statusName:
        type: string
      storageUsage:
        $ref: '#/definitions/controller.Usage'
      tags:
        items:
          type: string
        type: array
      tls:
        type: boolean
      updateTime:
        type: string
      whitelist:
        items:
          type: string
        type: array
    type: object
  clusterapi.DistributionItem:
    properties:
      count:
        type: integer
      specCode:
        type: string
      zoneCode:
        type: string
    type: object
  controller.CommonResult:
    properties:
      code:
        type: integer
      data:
        type: object
      message:
        type: string
    type: object
  controller.Operator:
    properties:
      manualOperator:
        type: boolean
      operatorId:
        type: string
      operatorName:
        type: string
      tenantId:
        type: string
    type: object
  controller.Page:
    properties:
      page:
        type: integer
      pageSize:
        type: integer
      total:
        type: integer
    type: object
  controller.ResultWithPage:
    properties:
      code:
        type: integer
      data:
        type: object
      message:
        type: string
      page:
        $ref: '#/definitions/controller.Page'
    type: object
  controller.StatusInfo:
    properties:
      createTime:
        type: string
      deleteTime:
        type: string
      inProcessFlowId:
        type: integer
      statusCode:
        type: string
      statusName:
        type: string
      updateTime:
        type: string
    type: object
  controller.Usage:
    properties:
      total:
        type: number
      usageRate:
        type: number
      used:
        type: number
    type: object
  databaseapi.DataExportReq:
    properties:
      clusterId:
        type: string
      filePath:
        type: string
      fileType:
        type: string
      filter:
        type: string
      password:
        type: string
      userName:
        type: string
    type: object
  databaseapi.DataExportResp:
    properties:
      recordId:
        type: string
    type: object
  databaseapi.DataImportReq:
    properties:
      clusterId:
        type: string
      filePath:
        type: string
      password:
        type: string
      userName:
        type: string
    type: object
  databaseapi.DataImportResp:
    properties:
      recordId:
        type: string
    type: object
  databaseapi.DataTransportInfo:
    properties:
      clusterId:
        type: string
      endTime:
        type: string
      filePath:
        type: string
      recordId:
        type: string
      startTime:
        type: string
      status:
        type: string
      transportType:
        type: string
    type: object
  databaseapi.DataTransportQueryReq:
    properties:
      page:
        type: integer
      pageSize:
        type: integer
      recordId:
        type: string
    type: object
  databaseapi.DataTransportRecordQueryResp:
    properties:
      transportRecords:
        items:
          $ref: '#/definitions/databaseapi.DataTransportInfo'
        type: array
    type: object
  hostapi.AllocHostsReq:
    properties:
      pdReq:
        items:
          $ref: '#/definitions/hostapi.Allocation'
        type: array
      tidbReq:
        items:
          $ref: '#/definitions/hostapi.Allocation'
        type: array
      tikvReq:
        items:
          $ref: '#/definitions/hostapi.Allocation'
        type: array
    type: object
  hostapi.AllocHostsRsp:
    properties:
      pdHosts:
        items:
          $ref: '#/definitions/hostapi.AllocateRsp'
        type: array
      tidbHosts:
        items:
          $ref: '#/definitions/hostapi.AllocateRsp'
        type: array
      tikvHosts:
        items:
          $ref: '#/definitions/hostapi.AllocateRsp'
        type: array
    type: object
  hostapi.AllocateRsp:
    properties:
      cpuCore:
        type: integer
      disk:
        $ref: '#/definitions/hostapi.Disk'
      hostName:
        type: string
      ip:
        type: string
      memory:
        type: integer
      passwd:
        type: string
      userName:
        type: string
    type: object
  hostapi.Allocation:
    properties:
      count:
        type: integer
      cpuCores:
        type: integer
      failureDomain:
        type: string
      memory:
        type: integer
    type: object
  hostapi.Disk:
    properties:
      capacity:
        description: 'Disk size, Unit: GB'
        type: integer
      diskId:
        type: string
      name:
        description: '[sda/sdb/nvmep0...]'
        type: string
      path:
        description: 'Disk mount path: [/data1]'
        type: string
      status:
        description: Disk Status, 0 for available, 1 for inused
        type: integer
    type: object
  hostapi.DomainResource:
    properties:
      count:
        type: integer
      purpose:
        type: string
      specCode:
        type: string
      specName:
        type: string
      zoneCode:
        type: string
      zoneName:
        type: string
    type: object
  hostapi.HostInfo:
    properties:
      az:
        type: string
      cpuCores:
        type: integer
      createTime:
        type: integer
      dc:
        type: string
      disks:
        items:
          $ref: '#/definitions/hostapi.Disk'
        type: array
      hostId:
        type: string
      hostName:
        type: string
      ip:
        type: string
      kernel:
        type: string
      memory:
        description: Host memory size, Unit:GB
        type: integer
      nic:
        description: 'Host network type: 1GE or 10GE'
        type: string
      os:
        type: string
      passwd:
        type: string
      purpose:
        description: What Purpose is the host used for? [compute/storage or both]
        type: string
      rack:
        type: string
      spec:
        description: Host Spec, init while importing
        type: string
      status:
        description: Host Status, 0 for Online, 1 for offline
        type: integer
      userName:
        type: string
    type: object
  hostapi.SpecBaseInfo:
    properties:
      specCode:
        type: string
      specName:
        type: string
    type: object
  hostapi.ZoneBaseInfo:
    properties:
      zoneCode:
        type: string
      zoneName:
        type: string
    type: object
  instanceapi.BackupDeleteReq:
    properties:
      clusterId:
        type: string
    type: object
  instanceapi.BackupRecord:
    properties:
      backupMode:
        type: string
      backupRange:
        type: string
      backupType:
        type: string
      clusterId:
        type: string
      endTime:
        type: string
      filePath:
        type: string
      id:
        type: integer
      operator:
        $ref: '#/definitions/controller.Operator'
      size:
        type: integer
      startTime:
        type: string
      status:
        $ref: '#/definitions/controller.StatusInfo'
    type: object
  instanceapi.BackupRecordQueryReq:
    properties:
      endTime:
        type: integer
      page:
        type: integer
      pageSize:
        type: integer
      startTime:
        type: integer
    type: object
  instanceapi.BackupRecoverReq:
    properties:
      clusterId:
        type: string
    type: object
  instanceapi.BackupReq:
    properties:
      backupRange:
        type: string
      backupType:
        type: string
      clusterId:
        type: string
      filePath:
        type: string
    type: object
  instanceapi.BackupStrategy:
    properties:
      backupDate:
        type: string
      backupRange:
        type: string
      backupType:
        type: string
      clusterId:
        type: string
      filePath:
        type: string
      period:
        type: string
    type: object
  instanceapi.BackupStrategyUpdateReq:
    properties:
      strategy:
        $ref: '#/definitions/instanceapi.BackupStrategy'
    type: object
  instanceapi.ParamInstance:
    properties:
      name:
        type: string
      value:
        type: object
    type: object
  instanceapi.ParamItem:
    properties:
      currentValue:
        $ref: '#/definitions/instanceapi.ParamInstance'
      definition:
        $ref: '#/definitions/knowledge.Parameter'
    type: object
  instanceapi.ParamUpdateReq:
    properties:
      values:
        items:
          $ref: '#/definitions/instanceapi.ParamInstance'
        type: array
    type: object
  instanceapi.ParamUpdateRsp:
    properties:
      clusterId:
        type: string
      status:
        type: string
      taskId:
        type: integer
    type: object
  knowledge.ClusterComponent:
    properties:
      componentName:
        type: string
      componentType:
        type: string
    type: object
  knowledge.ClusterComponentSpec:
    properties:
      clusterComponent:
        $ref: '#/definitions/knowledge.ClusterComponent'
      componentConstraint:
        $ref: '#/definitions/knowledge.ComponentConstraint'
    type: object
  knowledge.ClusterType:
    properties:
      code:
        type: string
      name:
        type: string
    type: object
  knowledge.ClusterTypeSpec:
    properties:
      clusterType:
        $ref: '#/definitions/knowledge.ClusterType'
      versionSpecs:
        items:
          $ref: '#/definitions/knowledge.ClusterVersionSpec'
        type: array
    type: object
  knowledge.ClusterVersion:
    properties:
      code:
        type: string
      name:
        type: string
    type: object
  knowledge.ClusterVersionSpec:
    properties:
      clusterVersion:
        $ref: '#/definitions/knowledge.ClusterVersion'
      componentSpecs:
        items:
          $ref: '#/definitions/knowledge.ClusterComponentSpec'
        type: array
    type: object
  knowledge.ComponentConstraint:
    properties:
      availableSpecCodes:
        items:
          type: string
        type: array
      componentRequired:
        type: boolean
      minZoneQuantity:
        type: integer
      suggestedNodeQuantities:
        items:
          type: integer
        type: array
    type: object
  knowledge.ParamValueConstraint:
    properties:
      contrastValue:
        type: object
      type:
        type: string
    type: object
  knowledge.Parameter:
    properties:
      constraints:
        items:
          $ref: '#/definitions/knowledge.ParamValueConstraint'
        type: array
      defaultValue:
        type: object
      desc:
        type: string
      name:
        type: string
      needRestart:
        type: boolean
      type:
        type: integer
      unit:
        type: string
    type: object
  taskapi.FlowWorkDetailInfo:
    properties:
      clusterId:
        type: string
      clusterName:
        type: string
      createTime:
        type: string
      deleteTime:
        type: string
      flowWorkName:
        type: string
      id:
        type: integer
      inProcessFlowId:
        type: integer
      manualOperator:
        type: boolean
      operatorId:
        type: string
      operatorName:
        type: string
      statusCode:
        type: string
      statusName:
        type: string
      tasks:
        items:
          $ref: '#/definitions/taskapi.FlowWorkTaskInfo'
        type: array
      tenantId:
        type: string
      updateTime:
        type: string
    type: object
  taskapi.FlowWorkDisplayInfo:
    properties:
      clusterId:
        type: string
      clusterName:
        type: string
      createTime:
        type: string
      deleteTime:
        type: string
      flowWorkName:
        type: string
      id:
        type: integer
      inProcessFlowId:
        type: integer
      manualOperator:
        type: boolean
      operatorId:
        type: string
      operatorName:
        type: string
      statusCode:
        type: string
      statusName:
        type: string
      tenantId:
        type: string
      updateTime:
        type: string
    type: object
  taskapi.FlowWorkTaskInfo:
    properties:
      id:
        type: integer
      taskName:
        type: string
    type: object
  userapi.LoginInfo:
    properties:
      userName:
        type: string
      userPassword:
        type: string
    type: object
  userapi.UserIdentity:
    properties:
      tenantId:
        type: string
      token:
        type: string
      userName:
        type: string
    type: object
host: localhost:4116
info:
  contact:
    email: zhangpeijin@pingcap.com
    name: zhangpeijin
  description: TiEM UI API
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  title: TiEM UI API
  version: "1.0"
paths:
  /backups:
    get:
      consumes:
      - application/json
      description: query backup records of a cluster
      parameters:
      - description: cluster id
        in: query
        name: clusterId
        required: true
        type: string
      - description: page
        in: body
        name: request
        schema:
          $ref: '#/definitions/instanceapi.BackupRecordQueryReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.ResultWithPage'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/instanceapi.BackupRecord'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: query backup records of a cluster
      tags:
      - cluster backup
    post:
      consumes:
      - application/json
      description: backup
      parameters:
      - description: backup request
        in: body
        name: backupReq
        required: true
        schema:
          $ref: '#/definitions/instanceapi.BackupReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/instanceapi.BackupRecord'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: backup
      tags:
      - cluster backup
  /backups/{backupId}:
    delete:
      consumes:
      - application/json
      description: delete backup record
      parameters:
      - description: backup record id
        in: path
        name: backupId
        required: true
        type: integer
      - description: backup delete request
        in: body
        name: backupDeleteReq
        required: true
        schema:
          $ref: '#/definitions/instanceapi.BackupDeleteReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  type: integer
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: delete backup record
      tags:
      - cluster backup
  /backups/{backupId}/restore:
    post:
      consumes:
      - application/json
      description: recover backup record of a cluster
      parameters:
      - description: backupId
        in: path
        name: backupId
        required: true
        type: string
      - description: backup recover request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/instanceapi.BackupRecoverReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/controller.StatusInfo'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: recover backup record of a cluster
      tags:
      - cluster backup
  /clusters:
    get:
      consumes:
      - application/json
      description: query clusters
      parameters:
      - in: query
        name: clusterId
        type: string
      - in: query
        name: clusterName
        type: string
      - in: query
        name: clusterStatus
        type: string
      - in: query
        name: clusterTag
        type: string
      - in: query
        name: clusterType
        type: string
      - in: query
        name: page
        type: integer
      - in: query
        name: pageSize
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.ResultWithPage'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/clusterapi.ClusterDisplayInfo'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: query clusters
      tags:
      - cluster
    post:
      consumes:
      - application/json
      description: create a cluster
      parameters:
      - description: create request
        in: body
        name: createReq
        required: true
        schema:
          $ref: '#/definitions/clusterapi.CreateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/clusterapi.CreateClusterRsp'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: create a cluster
      tags:
      - cluster
  /clusters/{clusterId}:
    delete:
      consumes:
      - application/json
      description: delete cluster
      parameters:
      - description: cluster id
        in: path
        name: clusterId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/clusterapi.DeleteClusterRsp'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: delete cluster
      tags:
      - cluster
    get:
      consumes:
      - application/json
      description: show details of a cluster
      parameters:
      - description: cluster id
        in: path
        name: clusterId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/clusterapi.DetailClusterRsp'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: show details of a cluster
      tags:
      - cluster
  /clusters/{clusterId}/dashboard:
    get:
      consumes:
      - application/json
      description: dashboard
      parameters:
      - description: cluster id
        in: path
        name: clusterId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/clusterapi.DescribeDashboardRsp'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: dashboard
      tags:
      - cluster
  /clusters/{clusterId}/params:
    get:
      consumes:
      - application/json
      description: query params of a cluster
      parameters:
      - in: query
        name: page
        type: integer
      - in: query
        name: pageSize
        type: integer
      - description: clusterId
        in: path
        name: clusterId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.ResultWithPage'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/instanceapi.ParamItem'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: query params of a cluster
      tags:
      - cluster params
    post:
      consumes:
      - application/json
      description: submit params
      parameters:
      - description: update params request
        in: body
        name: updateReq
        required: true
        schema:
          $ref: '#/definitions/instanceapi.ParamUpdateReq'
      - description: clusterId
        in: path
        name: clusterId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/instanceapi.ParamUpdateRsp'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: submit params
      tags:
      - cluster params
  /clusters/{clusterId}/strategy:
    put:
      consumes:
      - application/json
      description: save the backup strategy of a cluster
      parameters:
      - description: clusterId
        in: path
        name: clusterId
        required: true
        type: string
      - description: 备份策略信息
        in: body
        name: updateReq
        required: true
        schema:
          $ref: '#/definitions/instanceapi.BackupStrategyUpdateReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/instanceapi.BackupStrategy'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: save the backup strategy of a cluster
      tags:
      - cluster backup
  /clusters/{clusterId}/strategy/:
    get:
      consumes:
      - application/json
      description: show the backup strategy of a cluster
      parameters:
      - description: clusterId
        in: path
        name: clusterId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/instanceapi.BackupStrategy'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: show the backup strategy of a cluster
      tags:
      - cluster backup
  /clusters/{clusterId}/transport:
    get:
      consumes:
      - application/json
      description: query records of import and export
      parameters:
      - description: cluster id
        in: path
        name: clusterId
        required: true
        type: string
      - description: cluster info for query records
        in: body
        name: dataTransportQueryReq
        required: true
        schema:
          $ref: '#/definitions/databaseapi.DataTransportQueryReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/databaseapi.DataTransportRecordQueryResp'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: query records of import and export
      tags:
      - cluster data transport
  /clusters/export:
    post:
      consumes:
      - application/json
      description: export
      parameters:
      - description: cluster info for data export
        in: body
        name: dataExport
        required: true
        schema:
          $ref: '#/definitions/databaseapi.DataExportReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/databaseapi.DataExportResp'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: export data from tidb cluster
      tags:
      - cluster export
  /clusters/import:
    post:
      consumes:
      - application/json
      description: import
      parameters:
      - description: cluster info for import data
        in: body
        name: dataImport
        required: true
        schema:
          $ref: '#/definitions/databaseapi.DataImportReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/databaseapi.DataImportResp'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: import data to tidb cluster
      tags:
      - cluster import
  /flowwork/{flowWorkId}:
    get:
      consumes:
      - application/json
      description: show details of a flow work
      parameters:
      - description: flow work id
        in: path
        name: flowWorkId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/taskapi.FlowWorkDetailInfo'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: show details of a flow work
      tags:
      - task
  /flowworks:
    get:
      consumes:
      - application/json
      description: query flow works
      parameters:
      - in: query
        name: clusterId
        type: string
      - in: query
        name: keyword
        type: string
      - in: query
        name: page
        type: integer
      - in: query
        name: pageSize
        type: integer
      - in: query
        name: status
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.ResultWithPage'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/taskapi.FlowWorkDisplayInfo'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: query flow works
      tags:
      - task
  /knowledges:
    get:
      consumes:
      - application/json
      description: show cluster knowledge
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/knowledge.ClusterTypeSpec'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: show cluster knowledge
      tags:
      - knowledge
  /resources/allochosts:
    post:
      consumes:
      - application/json
      description: should be used in testing env
      parameters:
      - description: location and spec of hosts
        in: body
        name: Alloc
        required: true
        schema:
          $ref: '#/definitions/hostapi.AllocHostsReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/hostapi.AllocHostsRsp'
              type: object
      security:
      - ApiKeyAuth: []
      summary: Alloc host/disk resources for creating tidb cluster
      tags:
      - resource
  /resources/failuredomains:
    get:
      consumes:
      - application/json
      description: get resource info in each failure domain
      parameters:
      - description: failure domain type of dc/zone/rack
        enum:
        - 1
        - 2
        - 3
        in: query
        name: failureDomainType
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/hostapi.DomainResource'
                  type: array
              type: object
      security:
      - ApiKeyAuth: []
      summary: Show the resources on failure domain view
      tags:
      - resource
  /resources/host:
    post:
      consumes:
      - application/json
      description: import one host by json
      parameters:
      - description: Host information
        in: body
        name: host
        required: true
        schema:
          $ref: '#/definitions/hostapi.HostInfo'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  type: string
              type: object
      security:
      - ApiKeyAuth: []
      summary: Import a host to TiEM System
      tags:
      - resource
  /resources/hosts:
    get:
      consumes:
      - application/json
      description: get hosts lit
      parameters:
      - in: query
        name: page
        type: integer
      - in: query
        name: pageSize
        type: integer
      - in: query
        name: purpose
        type: string
      - in: query
        name: status
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.ResultWithPage'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/hostapi.HostInfo'
                  type: array
              type: object
      security:
      - ApiKeyAuth: []
      summary: Show all hosts list in TiEM
      tags:
      - resource
    post:
      consumes:
      - multipart/form-data
      description: import hosts by xlsx file
      parameters:
      - description: hosts information in a xlsx file
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  items:
                    type: string
                  type: array
              type: object
      security:
      - ApiKeyAuth: []
      summary: Import a batch of hosts to TiEM
      tags:
      - resource
  /resources/hosts-template/:
    get:
      consumes:
      - application/json
      description: get host template xlsx file
      produces:
      - application/octet-stream
      responses:
        "200":
          description: OK
          schema:
            type: file
      security:
      - ApiKeyAuth: []
      summary: Download the host information template file for importing
      tags:
      - resource
  /resources/hosts/:
    delete:
      consumes:
      - application/json
      description: remove hosts by a list
      parameters:
      - description: list of host IDs
        in: body
        name: hostIds
        required: true
        schema:
          items:
            type: string
          type: array
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  type: string
              type: object
      security:
      - ApiKeyAuth: []
      summary: Remove a batch of hosts
      tags:
      - resource
  /resources/hosts/{hostId}:
    delete:
      consumes:
      - application/json
      description: remove a host by id
      parameters:
      - description: host id
        in: path
        name: hostId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  type: string
              type: object
      security:
      - ApiKeyAuth: []
      summary: Remove a host
      tags:
      - resource
    get:
      consumes:
      - application/json
      description: get one host by id
      parameters:
      - description: host ID
        in: path
        name: hostId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/hostapi.HostInfo'
              type: object
      security:
      - ApiKeyAuth: []
      summary: Show a host
      tags:
      - resource
  /user/login:
    post:
      consumes:
      - application/json
      description: login
      parameters:
      - description: login info
        in: body
        name: loginInfo
        required: true
        schema:
          $ref: '#/definitions/userapi.LoginInfo'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/userapi.UserIdentity'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      summary: login
      tags:
      - platform
  /user/logout:
    post:
      consumes:
      - application/json
      description: logout
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/userapi.UserIdentity'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: logout
      tags:
      - platform
  /user/profile:
    get:
      consumes:
      - application/json
      description: profile
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/controller.CommonResult'
            - properties:
                data:
                  $ref: '#/definitions/userapi.UserIdentity'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/controller.CommonResult'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/controller.CommonResult'
      security:
      - ApiKeyAuth: []
      summary: user profile
      tags:
      - platform
securityDefinitions:
  ApiKeyAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
